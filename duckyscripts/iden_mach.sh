#!/bin/bash

# Set your server's IP address and port
SERVER="http://192.168.1.30:55555/receive_data"

# Get the MAC address from one of the available network interfaces
MAC=$(ip link | awk '/ether/ {print $2}' | head -n 1)
if [ -z "$MAC" ]; then
    MAC="MAC not found"
fi

# Get the Ubuntu version
UBUNTU_VERSION=$(lsb_release -d | awk -F"\t" '{print $2}')
if [ -z "$UBUNTU_VERSION" ]; then
    UBUNTU_VERSION="Ubuntu version not found"
fi

# Get the kernel version
KERNEL_VERSION=$(uname -r)
if [ -z "$KERNEL_VERSION" ]; then
    KERNEL_VERSION="Kernel version not found"
fi

# Determine if it's a virtual machine or a physical computer
if grep -q 'hypervisor' /proc/cpuinfo; then
    VM_OR_PC="Virtual Machine"
else
    VM_OR_PC="Physical Computer"
fi

# Send the information to the server
wget --quiet --output-document=- "${SERVER}?mac=${MAC}&ubuntu_version=${UBUNTU_VERSION}&kernel_version=${KERNEL_VERSION}&vm_or_pc=${VM_OR_PC}"

echo "Information sent to the server."
